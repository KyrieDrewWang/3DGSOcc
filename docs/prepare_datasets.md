## Prepare NuScenes Dataset

step 1: Download nuScenes V1.0 full dataset data from [HERA](https://www.nuscenes.org/download) on `./data/nuscenes`.

step 2: Download nuScenes-lidarseg data from [HERA](https://www.nuscenes.org/download).

step 3: Download (only) the 'gts' from [Occ3D-nuScenes](https://github.com/Tsinghua-MARS-Lab/Occ3D)

step 4: Create the pkl files:

```
python tools/create_data_bevdet.py
```

step 5: Create 2D GT for RenderOcc:

```
python tools/gen_data/gen_depth_gt.py
python tools/gen_data/gen_seg_gt_from_lidarseg.py
```

- Download Pretrained model weights

```
mkdir ckpts
cd ckpts & wget https://github.com/pmj110119/storage/releases/download/v1/bevdet-stbase-4d-stereo-512x1408-cbgs.pth
```

**Folder structure**

```
enderOcc
├── mmdet3d/
├── tools/
├── configs/
├── ckpts/
│   ├── TODO.pth
├── data/
│   ├── nuscenes/
│   │   ├── gts/  # ln -s occupancy gts to this location
│   │   ├── maps/
│   │   ├── samples/
│   │   ├── sweeps/
|   |   ├── bevdetv2-nuscenes_infos_val.pkl    # generated by step 4
|   |   ├── bevdetv2-nuscenes_infos_train.pkl  # generated by step 4
|   |   ├── seg_gt_lidarseg                    # generated by step 5
|   |   ├── depth_gt                           # generated by step 5
|   |   ├── lidarseg
|   |   │   └── v1.0-{mini, test, trainval} <- Contains the .bin files; a .bin file 
|   |   │                                      contains the labels of the points in a 
|   |   │                                      point cloud (note that v1.0-test does not 
|   |   │                                      have any .bin files associated w
|   |   └── v1.0-{mini, test, trainval}
|   |       ├── Usual files (e.g. attribute.json, calibrated_sensor.json etc.)
|   |       ├── lidarseg.json  <- contains the mapping of each .bin file to the token
|   |       └── category.json  <- contains the categories of the labels (note that the 
                              category.json from nuScenes v1.0 is overwritten)


```